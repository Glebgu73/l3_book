class Book < ActiveRecord::Base
  attr_accessible :author, :description, :number_of_pages, :production_year, :publishing_house, :title, :state
	
	state_machine :state, :initial => :not_downloaded do
    event :DOWNLOAD do
      transition :not_downloaded  => :downloaded     
    end

    event :unpublish do
      transition :deleted => :unpublished
      transition :published => :unpublished
    end

    event :delete do
      transition :unpublished => :deleted
      transition :published => :deleted
    end
  end
	state_machine initial: :not_downloaded do
    event :download do
      transition all  => :downloaded
    end

    event :delete do
      transition all => :not_downloaded
    end
  end
end
